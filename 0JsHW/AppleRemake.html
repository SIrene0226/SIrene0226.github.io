<!doctype html>
<html lang="en">
    <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">

    <title>Remake Apple</title>

    <style>
        .container{
            display: flex;
            justify-content: center;
        }
        .btn-group .btn{
            margin: 15px;
        }
        .container .box{
            flex-grow: 1;
        }
        .active{
            outline: 5px solid rgba(114, 113, 113, 0.658);
        }
        .check:checked ~ label{
            outline: 5px solid rgba(114, 113, 113, 0.658);
        }
    </style>
    </head>
    <body>
        
    <div class="container header">
        <div class="btn-group">
            <button class="btn btn-secondary" id="iphone" onclick="chooseProduct('Iphone')" >IPhone</button>
            <button class="btn btn-secondary" id="ipad" onclick="chooseProduct('IPad')">IPad</button>
            <button class="btn btn-secondary" id="mac" onclick="chooseProduct('Mac')">Mac</button>
        </div>
    </div>
    <div class="container">
        <div class="box w-50" id="productImg">
            <img id="imgUrl" style="width: 100%;;padding: 30px 20px;">
        </div>
        <div class="box w-50" id="productInfo">
            
        </div>
    </div>

    <!-- Optional JavaScript; choose one of the two! -->
    <script>
        var Product={
            Iphone:{
                Detail:{
                    productName:'iPhone 11',
                    baseImgUrl:'https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/iphone11-select-2019-family?wid=441&amp;hei=529&amp;fmt=jpeg&amp;qlt=95&amp;.v=1567022175704'
                },
                Case:[
                    {color:'白色',colorValue:'#F9F6EF',imgUrl:'https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/iphone11-white-select-2019?wid=470&hei=556&fmt=png-alpha&.v=1566956148115'},
                    {color:'黑色',colorValue:'#1F2120',imgUrl:'https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/iphone11-black-select-2019?wid=470&hei=556&fmt=png-alpha&.v=1566956144418'},
                    {color:'綠色',colorValue:'#ADE0CD',imgUrl:'https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/iphone11-green-select-2019?wid=470&hei=556&fmt=png-alpha&.v=1566956144838'},
                    {color:'黃色',colorValue:'#FFE681',imgUrl:'https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/iphone11-yellow-select-2019?wid=470&hei=556&fmt=png-alpha&.v=1568141245782'},
                    {color:'紫色',colorValue:'#D1CDDB',imgUrl:'https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/iphone11-purple-select-2019?wid=470&hei=556&fmt=png-alpha&.v=1566960958082'},
                    {color:'紅色',colorValue:'#BA0C2F',imgUrl:'https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/iphone11-red-select-2019?wid=470&hei=556&fmt=png-alpha&.v=1566956144763'},
                ],
                Storage:[
                    {size:'64GB',price:'19900'},
                    {size:'128GB',price:'21500'},
                    {size:'256GB',price:'25000'}
                ]
            },
            IPad:{
                Detail:{
                    productName:'iPad',
                    baseImgUrl:'https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-2020-hero-landing?wid=372&hei=606&fmt=jpeg&qlt=95&.v=1598913494000'
                },
                Case:[
                    {color:'太空灰色',colorValue:'#B0B3B6',imgUrl:'https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-2020-hero-space-wifi-select?wid=470&hei=556&fmt=png-alpha&.v=1598915064000'},
                    {color:'銀色',colorValue:'#DFE1E0',imgUrl:'https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-2020-hero-silver-wifi-select?wid=470&hei=556&fmt=png-alpha&.v=1598915073000'},
                    {color:'金色',colorValue:'#EED0C2',imgUrl:'https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-2020-hero-gold-wifi-select?wid=470&hei=556&fmt=png-alpha&.v=1598915069000'}
                ],
                Storage:[
                    {size:'32GB',price:'10500'},
                    {size:'128GB',price:'13500'}
                ]
            },
            Mac:{
                Detail:{
                    productName:'MacBook Pro',
                    baseImgUrl:'https://www.apple.com/v/macbook-pro-16/c/images/meta/og__csakh451i0eq_large.png'
                },
                Case:[
                    {color:'太空灰色',colorValue:'#F9F6EF',imgUrl:'https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/mbp16touch-space-select-201911_GEO_TW?wid=452&hei=420&fmt=jpeg&qlt=95&.v=1573165435411'},
                    {color:'銀色',colorValue:'#DDDFDE',imgUrl:'https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/mbp16touch-silver-select-201911_GEO_TW?wid=452&hei=420&fmt=jpeg&qlt=95&.v=1573153623825'}
                ],
                Storage:[
                    {size:'512GB',price:'77900'},
                    {size:'1TB',price:'89900'}
                ]
            }
        }

        // let btn=document.getElementById("iphone");
        // btnPhone.addEventListener("click",function(){
        //     var productImg = document.getElementById("productImg");
        //     productImg.setAttribute('src',`${Product.Iphone.Detail.baseImgUrl}`);

        //     let info = document.getElementById("info");
        //     info.innerHTML=`<h1>購買 ${Product.Iphone.Detail.productName}</h1><br>`;

        //     info.innerHTML+=`<h3>選擇外觀。</h3>`;
        // });

        function chooseProduct(product){
            let item = selectId('imgUrl');
            let btn_group = document.getElementById('productInfo');
            
            //清空上一个
            item.src = '';
            btn_group.innerHTML='';

            item.src = Product[product].Detail.baseImgUrl;
            
            let title = document.createElement('h1');
            title.innerText=`購買 ${Product[product].Detail.productName}`;
            
            btn_group.appendChild(title);
            btn_group.appendChild(btnColor(product));
            btn_group.appendChild(btnStorage(product));
            // debugger;
        }

        function selectId(id){
            let item = document.getElementById(id);
            return item;
        }

        function btnColor(product) {
            let colorGroup = document.createElement('div');
            let chooseColorTitle = document.createElement('h3')
            chooseColorTitle.innerText='選擇外觀';

            colorGroup.appendChild(chooseColorTitle);
            Product[product].Case.forEach((colorBtn,index)=>{
                let btn = document.createElement("label");
                btn.setAttribute('class','color-label w-25 pt-3 bg-transparent me-3 mb-3');
                btn.setAttribute('style','height: 100px;border: 1px solid grey');

                let circle = document.createElement("div");
                circle.setAttribute('class','rounded-pill mx-auto mb-1');
                circle.setAttribute('style',`width: 40px;height: 40px;background-color: ${colorBtn.colorValue};`);
                
                let name = document.createElement("p");
                name.setAttribute('style','text-align: center;');
                name.innerText = colorBtn.color;

                btn.appendChild(circle);
                btn.appendChild(name);

                // btn.addEventListener('click',Active('color-label',colorBtn.imgUrl));
                colorGroup.appendChild(btn);
                btn.addEventListener('click', function(){
                    Array.from(document.getElementsByClassName('color-label')).forEach(x => {
                        x.classList.remove('active');
                    });
                    btn.classList.add('active');
                    let productImg = selectId('imgUrl');
                    productImg.setAttribute('src',`${colorBtn.imgUrl}`);
                    // debugger;
                });
            });
            return colorGroup;
        }
        
        function btnStorage(product) {
            let storageGroup = document.createElement('div');
            let chooseStorageTitle = document.createElement('h3')
            chooseStorageTitle.innerText='選擇儲存容量。';

            storageGroup.appendChild(chooseStorageTitle);
            Product[product].Storage.forEach((storageBtn,index)=>{
                let btn = document.createElement("label");
                btn.setAttribute('class','storage-label w-25 pt-3 bg-transparent me-3 mb-3');
                btn.setAttribute('style','height: 100px;border: 1px solid grey');

                let name = document.createElement("p");
                name.setAttribute('style','text-align: center;');
                name.innerText = storageBtn.size;
                
                let price = document.createElement("p");
                price.setAttribute('style','text-align: center;');
                price.innerText = '$'+storageBtn.price;

                btn.appendChild(name);
                btn.appendChild(price);

                storageGroup.appendChild(btn);

                btn.addEventListener('click', function(){
                    Array.from(document.getElementsByClassName('storage-label')).forEach(x => {
                        x.classList.remove('active');
                    });
                    btn.classList.add('active');
                    finalPrice.innerText=`NT$${storageBtn.price}`;
                });
                storageGroup.appendChild(btn);
            });
            // debugger;
            // btn_group.appendChild(storageGroup);
            let finalPrice = document.createElement("p");
            finalPrice.setAttribute('style','font-size:50px');
            storageGroup.appendChild(finalPrice);

            return storageGroup;
        }
        function createElementWithText(element, text){
            let el=document.createElement(element);
            el.innerText=text;

            return el;
        }
        // function Active(className, colorImg) {
        //     Array.from(document.getElementsByClassName(className)).forEach(x => {
        //                 x.classList.remove('active');
        //             });
        //             btn.classList.add('active');
        //             productImg.setAttribute('src',colorImg);
        // }
    </script>
    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
</body>
</html>